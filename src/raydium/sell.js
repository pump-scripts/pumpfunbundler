const a7_0x40d1ae=a7_0xab58;(function(_0x251bca,_0xc95467){const _0x3dad0e=a7_0xab58,_0x555848=_0x251bca();while(!![]){try{const _0x990cdc=-parseInt(_0x3dad0e(0x16e))/0x1*(-parseInt(_0x3dad0e(0x143))/0x2)+parseInt(_0x3dad0e(0x15e))/0x3+parseInt(_0x3dad0e(0x14c))/0x4+-parseInt(_0x3dad0e(0x182))/0x5*(-parseInt(_0x3dad0e(0x169))/0x6)+parseInt(_0x3dad0e(0x145))/0x7*(-parseInt(_0x3dad0e(0x175))/0x8)+-parseInt(_0x3dad0e(0x164))/0x9*(parseInt(_0x3dad0e(0x13c))/0xa)+-parseInt(_0x3dad0e(0x17f))/0xb;if(_0x990cdc===_0xc95467)break;else _0x555848['push'](_0x555848['shift']());}catch(_0x464f1f){_0x555848['push'](_0x555848['shift']());}}}(a7_0x4955,0x38813));function a7_0xab58(_0x1fb0a7,_0x4cde8d){const _0x495507=a7_0x4955();return a7_0xab58=function(_0xab5802,_0x52953a){_0xab5802=_0xab5802-0x12e;let _0x5575e2=_0x495507[_0xab5802];return _0x5575e2;},a7_0xab58(_0x1fb0a7,_0x4cde8d);}import{Connection,PublicKey,Keypair,TransactionInstruction,TransactionMessage,VersionedTransaction,SystemProgram,Transaction}from'@solana/web3.js';import*as a7_0x34f4bd from'@solana/spl-token';import a7_0x1660f2 from'fs';import a7_0x123d56 from'path';import a7_0x397a0e from'bs58';import a7_0x18fc2e from'inquirer';import{Parser}from'./parser.js';import a7_0x463a68 from'./createWSOL.js';import a7_0x43e01a from'chalk';import{fetchMarketAccounts,fetchMarketIdFromAPI}from'./fetchMarketAccounts.js';import{getPoolKeysByPoolId}from'./getPoolKeysByPoolId.js';const __dirname=a7_0x123d56[a7_0x40d1ae(0x14b)](new URL(import.meta[a7_0x40d1ae(0x171)])[a7_0x40d1ae(0x140)]),configPath=a7_0x123d56[a7_0x40d1ae(0x158)](__dirname,a7_0x40d1ae(0x13a));async function loadConfig(){const _0x4f6579=a7_0x40d1ae;return JSON[_0x4f6579(0x15c)](a7_0x1660f2[_0x4f6579(0x132)](configPath,_0x4f6579(0x167)));}function a7_0x4955(){const _0x580e28=['value','push','699985liJjNM','targetOrders','NATIVE_MINT','Failed\x20to\x20fetch\x20liquidity\x20pool\x20info.\x20Exiting\x20process.','blue','cmd','red','wallet','compileToV0Message','readFileSync','encode','getAssociatedTokenAddress','RPC_URL','pubkey','toFixed','green','Error','../../config.json','amount_in','402230teOCXQ','secretKey','sendTransaction','pubKey','pathname','\x20-\x20','baseVault','13414AyxgCT','marketBids','7zJjAZA','Success','yellow','list','getTokenAccountBalance','amount','dirname','263332kPmhHV','675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8','quoteVault','Market\x20accounts\x20not\x20found.\x20Attempting\x20to\x20fetch\x20ID\x20via\x20Raydium\x20API...','sign','Error\x20creating\x20keypair:','openOrders','marketQuoteVault','warn','marketBaseVault','File\x20','%\x20of\x20','resolve','\x20does\x20not\x20exist.','WALLET_BUYERS_FOLDER','marketProgramId','parse','fromSecretKey','404823eeVqDz','privKey','u64','err','marketEventQueue','getLatestBlockhash','18DEXLdv','authority','floor','utf8','decode','6LNpzQj','map','marketAsks','confirmed','log','61udOKHi','Choose\x20a\x20wallet\x20(pubKey\x20-\x20token\x20balance):','publicKey','url','length','Fetching\x20market\x20accounts...','Liquidity\x20pool\x20info\x20is\x20not\x20defined.\x20Cannot\x20proceed.','800328UFzdwd','error','createCloseAccountInstruction','prompt','blockhash','from','TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA','.json','toString','An\x20error\x20occurred\x20during\x20the\x20process:','3717648eHZRpV'];a7_0x4955=function(){return _0x580e28;};return a7_0x4955();}async function loadWallets(){const _0x2f3416=a7_0x40d1ae,_0x5c7776=await loadConfig(),_0x45899b=_0x5c7776[_0x2f3416(0x15a)],_0xd7a092=[];for(let _0x69b88a=0x1;_0x69b88a<=0x14;_0x69b88a++){const _0x4e0e30=a7_0x123d56['join'](_0x45899b,_0x2f3416(0x130)+_0x69b88a+_0x2f3416(0x17c));if(a7_0x1660f2['existsSync'](_0x4e0e30)){const _0x5d4192=Uint8Array[_0x2f3416(0x17a)](JSON['parse'](a7_0x1660f2['readFileSync'](_0x4e0e30,_0x2f3416(0x167)))),_0x36ad50=Keypair[_0x2f3416(0x15d)](_0x5d4192);_0xd7a092[_0x2f3416(0x181)]({'pubKey':_0x36ad50[_0x2f3416(0x170)]['toString'](),'privKey':a7_0x397a0e[_0x2f3416(0x133)](_0x36ad50[_0x2f3416(0x13d)])});}else console['warn'](a7_0x43e01a[_0x2f3416(0x147)](_0x2f3416(0x156)+_0x4e0e30+_0x2f3416(0x159)));}return _0xd7a092;}export function getKeypairFromBs58(_0x81cce1){const _0x19e3b4=a7_0x40d1ae;try{const _0x29c9ed=a7_0x397a0e[_0x19e3b4(0x168)](_0x81cce1),_0x6bf072=Uint8Array[_0x19e3b4(0x17a)](_0x29c9ed);return Keypair[_0x19e3b4(0x15d)](_0x6bf072);}catch(_0x49512b){console[_0x19e3b4(0x176)](_0x19e3b4(0x151),_0x49512b+_0x81cce1);throw _0x49512b;}}async function getTokenActBal(_0x10d09b,_0x270b7f){const _0x41c89f=a7_0x40d1ae,_0x45b55c=await loadConfig(),_0x52f788=new Connection(_0x45b55c[_0x41c89f(0x135)],_0x41c89f(0x16c)),_0x182807=new PublicKey(_0x10d09b['pubKey']);try{const _0x14d786=await _0x52f788['getTokenAccountsByOwner'](_0x182807,{'mint':_0x270b7f});if(_0x14d786[_0x41c89f(0x180)][_0x41c89f(0x172)]===0x0)return'0';const _0x4e11d7=_0x14d786[_0x41c89f(0x180)][0x0][_0x41c89f(0x136)],_0x265c62=await _0x52f788['getTokenAccountBalance'](_0x4e11d7);return _0x265c62['value'][_0x41c89f(0x14a)]||'0';}catch(_0x2215ce){return console[_0x41c89f(0x176)]('Error\x20fetching\x20balance\x20for\x20wallet\x20'+_0x10d09b[_0x41c89f(0x13f)]+':',_0x2215ce),_0x41c89f(0x139);}}async function chooseWallet(_0x14631a){const _0x203f46=a7_0x40d1ae,_0xb6c5be=await loadWallets(),_0x302e46=new PublicKey(_0x14631a),_0x39c958=await Promise['all'](_0xb6c5be[_0x203f46(0x16a)](async(_0x46d1c3,_0x856564)=>{const _0x4d178a=_0x203f46,_0x4b7f5d=await getTokenActBal(_0x46d1c3,_0x302e46);return{'name':_0x856564+':\x20'+_0x46d1c3[_0x4d178a(0x13f)]+_0x4d178a(0x141)+(_0x4b7f5d/0xf4240)[_0x4d178a(0x137)](0x2),'value':{'index':_0x856564,..._0x46d1c3}};})),_0x4c0601=[{'type':_0x203f46(0x148),'name':_0x203f46(0x130),'message':_0x203f46(0x16f),'choices':_0x39c958}];return a7_0x18fc2e[_0x203f46(0x178)](_0x4c0601)['then'](_0x22558f=>_0x22558f[_0x203f46(0x130)]);}async function raySell(_0x385a31,_0x57f533){const _0x460a0f=a7_0x40d1ae,_0x592384=await loadConfig(),_0x2e2853=new Connection(_0x592384[_0x460a0f(0x135)],_0x460a0f(0x16c)),_0x4b1419=await chooseWallet(_0x385a31),_0x1e5d2c=new PublicKey(_0x4b1419[_0x460a0f(0x13f)]),_0x51859d=getKeypairFromBs58(_0x4b1419[_0x460a0f(0x15f)]),_0x501fdd=await a7_0x34f4bd[_0x460a0f(0x134)](a7_0x34f4bd[_0x460a0f(0x184)],_0x1e5d2c),_0x2f9953=await a7_0x463a68(_0x1e5d2c);let _0x5a392e=null;try{console[_0x460a0f(0x16d)](a7_0x43e01a[_0x460a0f(0x186)](_0x460a0f(0x173)));let _0xf4ba2b=await fetchMarketAccounts(_0x2e2853,a7_0x34f4bd[_0x460a0f(0x184)],new PublicKey(_0x385a31),_0x460a0f(0x16c));if(!_0xf4ba2b){console[_0x460a0f(0x154)](a7_0x43e01a[_0x460a0f(0x147)](_0x460a0f(0x14f)));const _0x34df0b=await fetchMarketIdFromAPI(a7_0x34f4bd[_0x460a0f(0x184)],new PublicKey(_0x385a31));if(!_0x34df0b){console[_0x460a0f(0x176)](a7_0x43e01a['red']('Failed\x20to\x20fetch\x20ID\x20from\x20Raydium\x20API.\x20Exiting\x20process.'));return;}_0xf4ba2b={'id':new PublicKey(_0x34df0b)};}_0x5a392e=await getPoolKeysByPoolId(_0xf4ba2b['id'][_0x460a0f(0x17d)](),_0x2e2853);if(!_0x5a392e){console[_0x460a0f(0x176)](a7_0x43e01a['red'](_0x460a0f(0x185)));return;}}catch(_0x5119a3){console[_0x460a0f(0x176)](a7_0x43e01a['red'](_0x460a0f(0x17e)),_0x5119a3);return;}if(!_0x5a392e){console[_0x460a0f(0x176)](a7_0x43e01a[_0x460a0f(0x12f)](_0x460a0f(0x174)));return;}const _0x594f71=await _0x2e2853['getTokenAccountsByOwner'](_0x1e5d2c,{'mint':new PublicKey(_0x385a31)})['then'](_0x172afa=>_0x172afa[_0x460a0f(0x180)][0x0][_0x460a0f(0x136)]),_0xe1fa7a=await _0x2e2853[_0x460a0f(0x149)](_0x594f71);let _0x1dfc28=parseInt(_0xe1fa7a[_0x460a0f(0x180)][_0x460a0f(0x14a)],0xa);_0x57f533<0x64&&(_0x1dfc28=Math[_0x460a0f(0x166)](_0x1dfc28*_0x57f533/0x64),console['log'](a7_0x43e01a[_0x460a0f(0x186)]('Selling\x20'+_0x57f533+_0x460a0f(0x157)+_0x385a31+'\x20from\x20'+_0x4b1419['pubKey'])));const _0x26c2cc=new PublicKey(_0x460a0f(0x14d)),_0x5f2046=new Parser()['u8'](_0x460a0f(0x12e))[_0x460a0f(0x160)](_0x460a0f(0x13b))['u64']('min_out_amount'),_0x5eb06b=_0x5f2046[_0x460a0f(0x133)]({'cmd':0x9,'amount_in':_0x1dfc28,'min_out_amount':0x0}),_0x4a46f9=new TransactionInstruction({'programId':_0x26c2cc,'keys':[{'pubkey':new PublicKey(_0x460a0f(0x17b)),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x5a392e['id']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e['authority']),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x152)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x183)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x142)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x14e)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x15b)]),'isSigner':![],'isWritable':![]},{'pubkey':new PublicKey(_0x5a392e['marketId']),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x144)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x16b)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x162)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x155)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x153)]),'isSigner':![],'isWritable':!![]},{'pubkey':new PublicKey(_0x5a392e[_0x460a0f(0x165)]),'isSigner':![],'isWritable':![]},{'pubkey':_0x594f71,'isSigner':![],'isWritable':!![]},{'pubkey':_0x501fdd,'isSigner':![],'isWritable':!![]},{'pubkey':_0x1e5d2c,'isSigner':!![],'isWritable':!![]}],'data':_0x5eb06b}),_0x58387b=a7_0x34f4bd[_0x460a0f(0x177)](_0x501fdd,_0x1e5d2c,_0x51859d[_0x460a0f(0x170)]),_0x53d9dc=a7_0x34f4bd['createCloseAccountInstruction'](_0x594f71,_0x1e5d2c,_0x1e5d2c),_0x52d99b=await _0x2e2853[_0x460a0f(0x163)]('finalized'),_0x2cc22e=_0x52d99b[_0x460a0f(0x179)],_0x2b964f=new TransactionMessage({'payerKey':_0x51859d[_0x460a0f(0x170)],'instructions':[_0x2f9953,_0x4a46f9,_0x53d9dc,_0x58387b],'recentBlockhash':_0x2cc22e})[_0x460a0f(0x131)](),_0x1d1c42=new VersionedTransaction(_0x2b964f);_0x1d1c42[_0x460a0f(0x150)]([_0x51859d]);try{const _0x52537d=await _0x2e2853[_0x460a0f(0x13e)](_0x1d1c42);console[_0x460a0f(0x16d)](a7_0x43e01a[_0x460a0f(0x138)]('Transaction\x20sent!\x20Explorer:\x20https://solscan.io/tx/'+_0x52537d));const _0x41e765=await _0x2e2853['confirmTransaction'](_0x52537d,'confirmed');console[_0x460a0f(0x16d)](a7_0x43e01a[_0x460a0f(0x138)]('Transaction\x20confirmed!\x20Status:\x20'+(_0x41e765[_0x460a0f(0x180)][_0x460a0f(0x161)]?_0x460a0f(0x139):_0x460a0f(0x146))));}catch(_0x37d78f){console[_0x460a0f(0x176)](a7_0x43e01a[_0x460a0f(0x12f)]('Transaction\x20failed:\x20'+_0x37d78f['message']));}}export default raySell;